{{! @glint-nocheck: not typesafe yet }}
{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

<div class={{this.classNames}} ...attributes>
  <div class="hds-code-block__header">
    {{~yield (hash Title=(component "hds/code-block/title"))~}}
    {{~yield (hash Description=(component "hds/code-block/description"))~}}
  </div>
  <div class="hds-code-block__body">
    {{#if @editable}}
      <textarea {{on "input" this.updateCodeBlock}} spellcheck="false"></textarea>
    {{/if}}
    {{! content within pre tag is whitespace-sensitive; do not add new lines! }}
    <pre
      class="hds-code-block__code"
      {{style maxHeight=@maxHeight}}
      data-line={{@highlightLines}}
      id={{this.preCodeId}}
      tabindex={{this.tabindex}}
      aria-hidden={{if @editable "true" "false"}}
    ><code
        {{did-insert this.setPrismCode}}
        {{did-update this.setPrismCode this.code @language}}
        tabindex={{this.tabindex}}
      >
        {{~this.prismCode~}}
      </code></pre>

    {{#if @hasCopyButton}}
      <Hds::CodeBlock::CopyButton @targetToCopy="#{{this.preCodeId}}" aria-describedby={{this.preCodeId}} />
    {{/if}}
  </div>
</div>